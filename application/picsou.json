{
    "title": "PICSOU en action",
    "desc": "Analyse les cours de la bourse et propose des ordres d'achat et de vente de valeurs",
    "menu_orientation": "horizontal",
    "tables": {
        "ptf": {
            "basename": "/mnt/sandisk/grive/zim/Bourse/picsou.sqlite",
            "key": "ptf_id",
            "elements": {
                "ptf_id": {
                    "label_long": "Valeur",
                    "label_short": "Valeur",
                    "type": "text",
                    "sortable": true,
                    "searchable": true
                },
                "ptf_name": {
                    "label_long": "Nom",
                    "label_short": "Nom",
                    "type": "text",
                    "searchable": true,
                    "sortable": true,
                    "col_width": 150
                },
                "ptf_date": {
                    "label_long": "Date",
                    "label_short": "Date",
                    "type": "text",
                    "sortable": true
                },
                "ptf_quote": {
                    "label_long": "Cours",
                    "label_short": "Cours",
                    "type": "text",
                    "col_align": "right",
                    "display": "%3.2f €",
                    "default": "0.0"
                },
                "ptf_rsi": {
                    "label_long": "RSI",
                    "label_short": "RSI",
                    "type": "float",
                    "display": "%1.0f",
                    "col_align": "center",
                    "sql_color": "case when ptf_rsi > 67 then '#006600' when ptf_rsi < 37 then '#FF0000' else '#000000' end",
                    "default": "0",
                    "sortable": true
                },
                "ptf_macd": {
                    "label_long": "MACD",
                    "label_short": "MACD",
                    "type": "float",
                    "display": "%3.2f",
                    "col_align": "right",
                    "sortable": true,
                    "sql_color": "case when ptf_macd > 0 then '#006600' else '#FF0000' end",
                    "default": "0.0"
                },
                "ptf_inptf": {
                    "label_long": "Valeur en Production",
                    "label_short": "Prod",
                    "type": "check",
                    "sql_get": "case when ptf_inptf = 'PPP' then 1 else 0 end",
                    "sql_put": "case when :ptf_inptf = 1 then 'PPP' else '' end"
                },
                "_fgraph": {
                    "label_long": "Graph",
                    "label_short": "Graph",
                    "type": "form",
                    "params": {
                        "form": "fgraph",
                        "icon_name": "applications-office"
                    }
                },
                "_graph": {
                    "label_long": "Graph",
                    "label_short": "Graph",
                    "type": "graph"
                }
            },
            "views": {
                "vall": {
                    "title": "Les valeurs",
                    "form_add": "fadd",
                    "form_edit": "fedit",
                    "deletable": true,
                    "elements": {
                        "ptf_id": {},
                        "ptf_name": {},
                        "ptf_inptf": {},
                        "ptf_quote": {},
                        "ptf_date": {},
                        "ptf_rsi": {},
                        "ptf_macd": {},
                        "_fgraph": {}
                    },
                    "sql_wherex": "ptf_id in ('GET.PA','IPN.PA')"
                },
                "vopen": {
                    "title": "En production",
                    "elements": {
                        "ptf_id": {},
                        "ptf_name": {},
                        "ptf_inptf": {},
                        "ptf_quote": {},
                        "ptf_date": {},
                        "ptf_rsi": {},
                        "ptf_macd": {}
                    },
                    "sql_where": "ptf_inptf = 'PPP'"
                }
            },
            "forms": {
                "fadd": {
                    "title": "Ajout d'une valeur",
                    "elements": {
                        "ptf_id": {},
                        "ptf_name": {"hide": true},
                        "ptf_inptf": {"hide": true},
                        "ptf_quote": {"hide": true},
                        "ptf_date": {"hide": true},
                        "ptf_rsi": {"hide": true},
                        "ptf_macd": {"hide": true}
                    },
                    "sql_post": "update ptf set ptf_macd = 2.3 where ptf_id = '{ptf_id}'"
                },
                "fedit": {
                    "title": "Mise à jour d'une valeur",
                    "elements": {
                        "ptf_id": {},
                        "ptf_name": {
                            "read_only": true
                        },
                        "ptf_inptf": {}
                    }
                },
                "fgraph": {
                    "title": "Cours de la valeur {ptf_id} - {ptf_name}",
                    "elements": {
                        "ptf_id": {},
                        "ptf_name": {},
                        "_graph": {}
                    }
                }
            }
        },
        "cours": {
            "basename": "/mnt/sandisk/data/picsou.sqlite",
            "key": "cours_id",
            "elements": {
                "cours_id": {
                    "label_long": "id",
                    "label_short": "id",
                    "type": "int"
                },
                "cours_ptf_id": {
                    "label_long": "Valeur",
                    "label_short": "Valeur",
                    "type": "text"
                },
                "cours_name": {
                    "label_long": "Nom",
                    "label_short": "Nom",
                    "type": "text",
                    "searchable": true,
                    "expandable": false,
                    "col_width": 150
                },
                "cours_date": {
                    "label_long": "Date",
                    "label_short": "Date",
                    "type": "text",
                    "sortable": true
                },
                "cours_close": {
                    "label_long": "Cours",
                    "label_short": "Cours",
                    "type": "float",
                    "display": "%3.2f €"
                },
                "cours_macd": {
                    "label_long": "MACD",
                    "label_short": "MACD",
                    "type": "float",
                    "display": "%3.2f",
                    "sql_colorx": "case when cours_macd > 0 then '#006600' else '#FF0000' end"
                }
            },
            "views": {
                "vall": {
                    "title": "Les cours",
                    "elements": {
                        "cours_id": {},
                        "cours_ptf_id": {},
                        "cours_name": {},
                        "cours_close": {"sortable": true},
                        "cours_date": {}
                    }
                }
            },
            "forms": {
            }
        }
    }
}