{
    "title": "PICSOU en action",
    "info": "Analyse les cours de la bourse et propose des ordres d'achat et de vente de valeurs",
    "menu_orientation": "horizontal",
    "icon_file": "picsou.jpg",
    "basename": "~/data/picsou/picsou.sqlite",
    "basehost": "",
    "basehostOld": "/mnt/nas/data/picsou/picsou.sqlite",
    "trade": {
        "stake": 1200,
        "cost": 0.007
    },
    "scheduler": {
        "batch": "./picsou_batch.py -day",
        "periode_mn": 10
    },
    "shell": {
        "Picsou Backup": "./picsou_batch.py -backup",
        "Picsou Restauration": "./picsou_batch.py -restore",
        "Picsou Simul": "./picsou_batch.py -simul -account",
        "Picsou Quote": "./picsou_batch.py -simul -account -quote",
        "Picsou Day": "./picsou_batch.py -day",
        "Picsou Day 10 mns": "./picsou_batch.py -day10"
    },
    "tables": {
        "ptf": {
            "key": "ptf_id",
            "key_display": "ptf_name",
            "elements": {
                "ptf_id": {
                    "label_long": "Valeur",
                    "label_short": "Valeur",
                    "type": "text",
                    "sortable": true,
                    "searchable": true
                },
                "ptf_name": {
                    "label_long": "Nom",
                    "label_short": "Nom",
                    "type": "text",
                    "searchable": true,
                    "sortable": true,
                    "col_width": 140
                },
                "ptf_note": {
                    "label_long": "Note",
                    "label_short": "Note",
                    "type": "text",
                    "col_editable": true,
                    "searchable": true
                },
                "ptf_disabled": {
                    "label_long": "Valeur Non Active",
                    "label_short": "NA",
                    "type": "check",
                    "col_editable": true
                },
                "_fgraph": {
                    "label_long": "Graph",
                    "label_short": "",
                    "type": "form",
                    "params": {
                        "plugin": "picsou_graph.PicsouGraphDay",
                        "icon_name": "applications-office",
                        "ptf_id": "{ptf_id}"
                    }
                },
                "_batch": {
                    "label_long": "Actualiation des données",
                    "label_short": "Actualiser...",
                    "type": "batch",
                    "params": {
                        "plugin": "picsou_batchui.PicsouBatchUi",
                        "icon_name": "view-refresh"
                    }
                },
                "_backup": {
                    "label_long": "Backup des données",
                    "label_short": "Backup...",
                    "type": "batch",
                    "params": {
                        "plugin": "picsou_backup.PicsouBackup",
                        "icon_name": "view-refresh"
                    }
                }
            },
            "views": {
                "vactif": {
                    "title": "Ptf Actifs",
                    "form_add": "fadd",
                    "form_edit": "fedit",
                    "icon_name": "folder",
                    "searchable": true,
                    "elements": {
                        "ptf_id": {},
                        "ptf_name": {},
                        "_fgraph": {},
                        "ptf_disabled": {},
                        "ptf_note": {}
                    },
                    "sql_where": "ptf_disabled is null or ptf_disabled <> '1'",
                    "order_by": "ptf_id"
                },
                "vall": {
                    "title": "Ptf",
                    "form_add": "fadd",
                    "form_edit": "fedit",
                    "icon_name": "folder",
                    "deletable": true,
                    "searchable": true,
                    "elements": {
                        "ptf_id": {},
                        "ptf_name": {},
                        "_fgraph": {},
                        "ptf_disabled": {},
                        "ptf_note": {}
                    },
                    "order_by": "ptf_id"
                },
                "vsimul": {
                    "info1": "Vue particulière lus par les plugins batch",
                    "info2": "todo: enlever cette contrainte picsou.py ligne 142",
                    "title": "Simulateur",
                    "hide": true,
                    "elements": {
                        "ptf_id": {},
                        "_batch": {}
                    }
                }
            },
            "forms": {
                "fadd": {
                    "title": "Ajout d'un titre",
                    "elements": {
                        "ptf_id": {},
                        "ptf_name": {},
                        "ptf_disabled": {},
                        "ptf_note": {}
                    }
                },
                "fedit": {
                    "title": "Mise à jour d'un titre",
                    "elements": {
                        "ptf_id": {},
                        "ptf_name": {},
                        "ptf_disabled": {},
                        "ptf_note": {}
                    }
                }
            }
        },
        "cdays": {
            "key": "cdays_id",
            "key_display": "cdays_id",
            "elements": {
                "cdays_id": {
                    "label_long": "id",
                    "label_short": "id",
                    "type": "int",
                    "hide": false
                },
                "cdays_ptf_id": {
                    "label_long": "Valeur",
                    "label_short": "Valeur",
                    "type": "text",
                    "searchable": true
                },
                "cdays_name": {
                    "label_long": "Nom",
                    "label_short": "Nom",
                    "type": "text",
                    "searchable": true,
                    "expandable": false,
                    "col_width": 150
                },
                "cdays_date": {
                    "label_long": "Date",
                    "label_short": "Date",
                    "type": "calendar",
                    "sortable": true,
                    "searchable": true
                },
                "cdays_close": {
                    "label_long": "Cours",
                    "label_short": "Cours",
                    "type": "float",
                    "display": "%3.2f €"
                },
                "cdays_volume": {
                    "label_long": "Volume",
                    "label_short": "Volume",
                    "type": "int",
                    "display": "% u"
                },
                "cdays_low": {
                    "label_long": "Min",
                    "label_short": "Min",
                    "type": "float",
                    "display": "%3.2f €"
                },
                "cdays_high": {
                    "label_long": "Max",
                    "label_short": "Max",
                    "type": "float",
                    "display": "%3.2f €"
                },
                "cdays_time": {
                    "label_long": "Heure",
                    "label_short": "Heure",
                    "type": "text",
                    "default": "2020-03-22 10:30:00",
                    "sortable": true,
                    "searchable": true
                },
                "cdays_percent": {
                    "label_long": "%",
                    "label_short": "%",
                    "type": "float",
                    "display": "%3.2f %%",
                    "sql_color": "case when cdays_percent < 0 then '#FF0000' else '#006600' end"
                },
                "cdays_rsi": {
                    "label_long": "RSI",
                    "label_short": "RSI",
                    "type": "float",
                    "display": "%3.2f"
                },
                "cdays_trade": {
                    "label_long": "Trade",
                    "label_short": "Trade",
                    "type": "text"
                },
                "cdays_quantity": {
                    "label_long": "Quantité",
                    "label_short": "QT",
                    "type": "integer"
                },
                "cdays_cost": {
                    "label_long": "Coût",
                    "label_short": "Coût",
                    "type": "float",
                    "display": "%3.2f €"
                },
                "cdays_gain": {
                    "label_long": "Gain",
                    "label_short": "Gain",
                    "type": "float",
                    "display": "%3.2f €",
                    "sql_color": "case when cdays_gain < 0 then '#FF0000' else '#006600' end"
                },
                "cdays_gainp": {
                    "label_long": "en %",
                    "label_short": "en %",
                    "type": "float",
                    "display": "%3.2f %%",
                    "sql_color": "case when cdays_gainp < 0 then '#FF0000' else '#006600' end"
                },
                "_batch": {
                    "label_long": "Actualiation des données",
                    "label_short": "Actualiser...",
                    "type": "batch",
                    "params": {
                        "plugin": "picsou_batchui.PicsouBatchUi",
                        "icon_name": "view-refresh"
                    }
                },
                "_fgraph": {
                    "label_long": "Graph",
                    "label_short": "Graph",
                    "type": "form",
                    "params": {
                        "plugin": "picsou_graph.PicsouGraphDay",
                        "icon_name": "applications-office",
                        "ptf_id": "{cdays_ptf_id}"
                    }
                }
            },
            "views": {
                "vall": {
                    "title": "Cours du jour",
                    "form_add": "fadd",
                    "form_edit": "fedit",
                    "searchable_sql": true,
                    "deletable": true,
                    "icon_name": "go-jump",
                    "limit": 400,
                    "elements": {
                        "cdays_id": {},
                        "cdays_ptf_id": {},
                        "cdays_name": {},
                        "cdays_time": {},
                        "cdays_close": {},
                        "cdays_volume": {},
                        "cdays_percent": {},
                        "cdays_rsi": {},
                        "cdays_trade": {},
                        "_fgraph": {},
                        "cdays_gain": {},
                        "cdays_gainp": {},
                        "_batch": {}
                    },
                    "order_by": "cdays.cdays_ptf_id, cdays.cdays_time asc"
                }
            },
            "forms": {
            }
        },
        "trades": {
            "key": "trades_id",
            "key_display": "trades_id",
            "elements": {
                "trades_id": {
                    "label_long": "id",
                    "label_short": "id",
                    "type": "int",
                    "hide": false
                },
                "trades_ptf_id": {
                    "label_long": "Valeur",
                    "label_short": "Valeur",
                    "type": "text",
                    "searchable": true
                },
                "trades_date": {
                    "label_long": "Jour",
                    "label_short": "Jour",
                    "type": "text",
                    "sortable": true,
                    "searchable": true
                },
                "trades_time": {
                    "label_long": "Heure",
                    "label_short": "Heure",
                    "type": "text",
                    "sortable": true,
                    "searchable": true
                },
                "trades_rsi": {
                    "label_long": "RSI",
                    "label_short": "RSI",
                    "type": "text"
                },
                "trades_buy": {
                    "label_long": "Achat",
                    "label_short": "Achat",
                    "type": "float",
                    "display": "%3.2f €"
                },
                "trades_sell": {
                    "label_long": "Vente",
                    "label_short": "Vente",
                    "type": "float",
                    "display": "%3.2f €"
                },
                "trades_quantity": {
                    "label_long": "Quantité",
                    "label_short": "Qt",
                    "type": "int"
                },
                "trades_cost": {
                    "label_long": "Coût",
                    "label_short": "Coût",
                    "type": "float",
                    "display": "%3.2f €"
                },
                "trades_gain": {
                    "label_long": "Gain",
                    "label_short": "Gain",
                    "type": "float",
                    "display": "%3.2f €",
                    "sql_color": "case when trades_gain < 0 then '#FF0000' else '#006600' end"
                },
                "trades_gainp": {
                    "label_long": "%",
                    "label_short": "%",
                    "type": "float",
                    "display": "%3.2f %%",
                    "sql_color": "case when trades_gainp < 0 then '#FF0000' else '#006600' end"
                },
                "trades_daybank": {
                    "label_long": "Banque",
                    "label_short": "Banque",
                    "type": "float",
                    "display": "%3.2f €"
                },
                "trades_day": {
                    "label_long": "Gain du jour",
                    "label_short": "Gain Jour",
                    "type": "float",
                    "display": "%3.2f €",
                    "sql_color": "case when trades_day < 0 then '#FF0000' else '#006600' end"
                },
                "trades_dayp": {
                    "label_long": "%%",
                    "label_short": "%%",
                    "type": "float",
                    "display": "%3.2f %%",
                    "sql_color": "case when trades_dayp < 0 then '#FF0000' else '#006600' end"
                },
                "_fgraph": {
                    "label_long": "Graph",
                    "label_short": "Graph",
                    "type": "form",
                    "params": {
                        "plugin": "picsou_graph.PicsouGraphDay",
                        "icon_name": "applications-office",
                        "ptf_id": "{trades_ptf_id}"
                    }
                }
            },
            "views": {
                "vday": {
                    "title": "Trades du jour",
                    "searchable_sql": true,
                    "deletable": true,
                    "icon_name": "go-jump",
                    "limit": 100,
                    "elements": {
                        "trades_id": {},
                        "trades_ptf_id": {},
                        "trades_time": {},
                        "trades_rsi": {},
                        "trades_buy": {},
                        "trades_sell": {},
                        "trades_quantity": {},
                        "trades_cost": {},
                        "trades_gain": {},
                        "trades_gainp": {},
                        "_fgraph": {},
                        "trades_daybank": {},
                        "trades_day": {},
                        "trades_dayp": {}
                    },
                    "sql_where": "trades_date = date('now')",
                    "order_by": "trades.trades_time, trades.trades_ptf_id",
                    "sql_footer": "SELECT printf('Le PICSOU du Jour : <b>%.2f</b> €', sum(trades_gain)) AS sql_footer FROM trades where trades_date = date('now')"
                },
                "vall": {
                    "title": "Trades Histo",
                    "searchable_sql": true,
                    "deletable": true,
                    "icon_name": "go-jump",
                    "limit": 100,
                    "elements": {
                        "trades_id": {},
                        "trades_ptf_id": {},
                        "trades_time": {},
                        "trades_rsi": {},
                        "trades_buy": {},
                        "trades_sell": {},
                        "trades_quantity": {},
                        "trades_cost": {},
                        "trades_gain": {},
                        "trades_gainp": {},
                        "_fgraph": {},
                        "trades_daybank": {},
                        "trades_day": {},
                        "trades_dayp": {}
                    },
                    "order_by": "trades.trades_time, trades.trades_ptf_id",
                    "sql_footer": "SELECT printf('PICSOU total : <b>%.2f</b> €', sum(trades_gain)) AS sql_footer FROM trades"
                }
            },
            "forms": {}
        }

    }
}